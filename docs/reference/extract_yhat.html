<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="A consistent method for extracting fitted values from a model fit object. Generally
a wrapper around augment from the broom package, but one that always
returns the values on the scale of the response variable. extract_yhat also covers arima
and INLA models that augment does not. extract_yhat is a generic, meaning that the method
invoked depends on what type of model is passed as the first argument."><title>Extract fitted values from a model object — extract_yhat • statsurv</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract fitted values from a model object — extract_yhat"><meta property="og:description" content="A consistent method for extracting fitted values from a model fit object. Generally
a wrapper around augment from the broom package, but one that always
returns the values on the scale of the response variable. extract_yhat also covers arima
and INLA models that augment does not. extract_yhat is a generic, meaning that the method
invoked depends on what type of model is passed as the first argument."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">statsurv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/spacetime_data.html">Spacetime Data in statsurv</a>
    <a class="dropdown-item" href="../articles/statsurv_overview.html">An introduction to `statsurv`</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CO-TEEO/statsurv/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Extract fitted values from a model object</h1>
      <small class="dont-index">Source: <a href="https://github.com/CO-TEEO/statsurv/blob/HEAD/R/extract_yhat.R" class="external-link"><code>R/extract_yhat.R</code></a></small>
      <div class="d-none name"><code>extract_yhat.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A consistent method for extracting fitted values from a model fit object. Generally
a wrapper around <code><a href="https://generics.r-lib.org/reference/augment.html" class="external-link">augment</a></code> from the broom package, but one that always
returns the values on the scale of the response variable. <code>extract_yhat</code> also covers <code>arima</code>
and <code>INLA</code> models that <code>augment</code> does not. <code>extract_yhat</code> is a generic, meaning that the method
invoked depends on what type of model is passed as the first argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_yhat</span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for merMod</span></span>
<span><span class="fu">extract_yhat</span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for inla</span></span>
<span><span class="fu">extract_yhat</span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span>, se_fit <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fit</dt>
<dd><p>A model fit object, such as that generated by <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></code> or
<code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></code>.</p></dd>


<dt>newdata</dt>
<dd><p>A data frame containing the data that should be used to predict the fitted values.
Must have all of the covariates used by the model fit object to calculate fitted values.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed into other methods</p></dd>


<dt>se_fit</dt>
<dd><p>If TRUE, also calculate the standard errors of the fitted values. Not available for
all methods.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The input data frame <code>newdata</code> with the added column <code>.fitted</code> containing the predicted
values. If <code>se_fit = TRUE</code>, then the data frame also contains the column <code>.se.fit</code> with the
errors of the predicted values. Some models may also return additional columns, such as
<code>.resid</code>. All columns added by <code>extract_yhat</code> or <code>augment</code> start with a dot.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Where possible, <code>extract_yhat</code> passes its arguments to <code><a href="https://generics.r-lib.org/reference/augment.html" class="external-link">augment</a></code>,
calling <code>augment(x = fit, newdata = newdata, type.predict = "response")</code>. In some cases, such
as for <code><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></code> models, <code>extract_yhat</code> takes additional steps to better handle
<code>NA</code> values in the original dataset used to fit the model. <code>extract_yhat</code> can also extract
fitted values from arima models or models from the <code>INLA</code> package that do not have <code>augment</code>
methods. See below for details on each individual method.</p>
    </div>
    <div class="section level2">
    <h2 id="method-details">Method Details<a class="anchor" aria-label="anchor" href="#method-details"></a></h2>
    

<ul><li><p><strong><code>lm, glm:</code></strong> Identical to <code>augment(x = fit, newdata = newdata, type.predict = "response")</code></p></li>
<li><p><strong><code>lmer, glmer:</code></strong> Starts by calling <code>augment</code>, but removes the columns ".mu",
".offset", ".sqrtXwt", ".sqrtrwt", ".weights", ".wtres", ".gam", and ".eta" from the result.
This is because these columns aren't necessary for statistical surveillance, and because they
have errors when the original data frame contains NA's. In addition, <code>extract_yhat</code> gives an
error if offset is included as an option in glmer. As a workaround, offsets can be specified
as a term in the model formula, via <code>offset(VAR)</code></p></li>
<li><p><strong><code>INLA:</code></strong> Uses the linear predictor calculated by INLA and the link function
to calculated fitted values. The model must be fit with the option
<code>control.predictor=list(compute = TRUE)</code> in order for <code>extract_yhat</code> to work. Can be called
with the option <code>se_fit = TRUE</code>, which gives standard errors for the fitted values, but note
that this can be extremely slow.</p></li>
<li><p><strong>Arima models:</strong> See <code><a href="extract_yhat.Arima.html">extract_yhat.Arima</a></code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="extract_yhat.Arima.html">extract_yhat.Arima</a></code> <code><a href="https://broom.tidymodels.org/reference/augment.lm.html" class="external-link">augment.lm</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/BenjaK/scanstatistics" class="external-link">"scanstatistics"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://broom.tidymodels.org/" class="external-link">"broom"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/bbolker/broom.mixed" class="external-link">"broom.mixed"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">NM_popcas</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit a model to all the data, and then extract predictions:</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">count</span> <span class="op">~</span> <span class="va">year</span>,</span></span>
<span class="r-in"><span>           family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">poisson</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">population</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           data <span class="op">=</span> <span class="va">NM_popcas</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">600</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Then use extract_yhat to get out predictions for our observed variable:</span></span></span>
<span class="r-in"><span><span class="fu">extract_yhat</span><span class="op">(</span><span class="va">fit</span>, <span class="va">NM_popcas</span>, se_fit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 608 x 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year county     population count .fitted .se.fit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">1</span>973 bernalillo     <span style="text-decoration: underline;">353</span>813    16    13.7   0.851</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">1</span>974 bernalillo     <span style="text-decoration: underline;">357</span>520    16    14.0   0.807</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">1</span>975 bernalillo     <span style="text-decoration: underline;">368</span>166    16    14.7   0.778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">1</span>976 bernalillo     <span style="text-decoration: underline;">378</span>483    16    15.4   0.745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">1</span>977 bernalillo     <span style="text-decoration: underline;">388</span>471    15    16.1   0.710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">1</span>978 bernalillo     <span style="text-decoration: underline;">398</span>130    18    16.8   0.674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">1</span>979 bernalillo     <span style="text-decoration: underline;">407</span>460    19    17.4   0.641</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">1</span>980 bernalillo     <span style="text-decoration: underline;">416</span>461    22    18.1   0.613</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>981 bernalillo     <span style="text-decoration: underline;">425</span>133    21    18.8   0.593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>982 bernalillo     <span style="text-decoration: underline;">433</span>476    21    19.5   0.587</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ... with 598 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can also fit glmer models</span></span></span>
<span class="r-in"><span><span class="va">fit_glmer</span> <span class="op">&lt;-</span> <span class="fu">lme4</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span><span class="va">count</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">year</span> <span class="op">-</span> <span class="fl">1980</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">county</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">population</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         family <span class="op">=</span> <span class="st">"poisson"</span>,</span></span>
<span class="r-in"><span>                         data <span class="op">=</span> <span class="va">NM_popcas</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">600</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">extract_yhat</span><span class="op">(</span><span class="va">fit_glmer</span>, <span class="va">NM_popcas</span>, se_fit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 608 x 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     year county     population count .fitted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">1</span>973 bernalillo     <span style="text-decoration: underline;">353</span>813    16    14.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">1</span>974 bernalillo     <span style="text-decoration: underline;">357</span>520    16    15.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">1</span>975 bernalillo     <span style="text-decoration: underline;">368</span>166    16    16.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">1</span>976 bernalillo     <span style="text-decoration: underline;">378</span>483    16    16.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">1</span>977 bernalillo     <span style="text-decoration: underline;">388</span>471    15    17.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">1</span>978 bernalillo     <span style="text-decoration: underline;">398</span>130    18    18.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">1</span>979 bernalillo     <span style="text-decoration: underline;">407</span>460    19    19.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">1</span>980 bernalillo     <span style="text-decoration: underline;">416</span>461    22    19.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">1</span>981 bernalillo     <span style="text-decoration: underline;">425</span>133    21    20.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">1</span>982 bernalillo     <span style="text-decoration: underline;">433</span>476    21    21.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ... with 598 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># We can also use INLA models if available:</span></span></span>
<span class="r-in"><span>  <span class="co"># All the data points to generate predictions for much be included in the</span></span></span>
<span class="r-in"><span>  <span class="co"># data arg of the INLA model</span></span></span>
<span class="r-in"><span>  <span class="va">fit_inla</span> <span class="op">&lt;-</span> <span class="fu">INLA</span><span class="fu">::</span><span class="fu">inla</span><span class="op">(</span><span class="va">count</span> <span class="op">~</span> <span class="va">year</span> <span class="op">+</span> <span class="fu">f</span><span class="op">(</span><span class="va">county</span>, model <span class="op">=</span> <span class="st">"iid"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         family <span class="op">=</span> <span class="st">"poisson"</span>,</span></span>
<span class="r-in"><span>                         control.family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"log"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">population</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         <span class="co"># This option is required to use extract_yhat</span></span></span>
<span class="r-in"><span>                         control.predictor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>compute <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         data <span class="op">=</span> <span class="va">NM_popcas</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">extract_yhat</span><span class="op">(</span><span class="va">fit_inla</span>, <span class="va">NM_popcas</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Paul Romer Present.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

