<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function divides a dataframe into overlapping time windows, in preparation for repeatedly
applying statistical surveillance methods. Each window consists of 0 or more data points to fit a
statistical model on, and 0 or more points to generate predictions for."><title>Divide data into overlapping windows — window_idtime • statsurv</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Divide data into overlapping windows — window_idtime"><meta property="og:description" content="This function divides a dataframe into overlapping time windows, in preparation for repeatedly
applying statistical surveillance methods. Each window consists of 0 or more data points to fit a
statistical model on, and 0 or more points to generate predictions for."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">statsurv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/spacetime_data.html">Spacetime Data in statsurv</a>
    <a class="dropdown-item" href="../articles/statsurv_overview.html">An introduction to `statsurv`</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CO-TEEO/statsurv/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Divide data into overlapping windows</h1>
      <small class="dont-index">Source: <a href="https://github.com/CO-TEEO/statsurv/blob/HEAD/R/windowing_functions.R" class="external-link"><code>R/windowing_functions.R</code></a></small>
      <div class="d-none name"><code>window_idtime.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function divides a dataframe into overlapping time windows, in preparation for repeatedly
applying statistical surveillance methods. Each window consists of 0 or more data points to fit a
statistical model on, and 0 or more points to generate predictions for.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">window_idtime</span><span class="op">(</span></span>
<span>  <span class="va">spacetime_data</span>,</span>
<span>  <span class="va">min_train</span>,</span>
<span>  max_train <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  n_predict <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  step <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  split_spatial_locations <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>spacetime_data</dt>
<dd><p>A data frame or a data frame extension (e.g., a tibble) that includes
columns `id_space` and `id_time` that are each a set of consecutive integers. The column
`id_time` identifies the time point associated with each row, with lower numbers being earlier
and higher numbers being later. The column `id_space` identifies the spatial location or area
associated with each row, but no meaning or order is ascribed to the values.</p></dd>


<dt>min_train, max_train</dt>
<dd><p>The minimum and maximum number of time points (as identified by
<code>id_time</code>) to include in the training data set. Times with fewer than this number of time
points will not be included as windows. Later times will include more time points in the
training data set, up to the maximum number identified by <code>max_train</code>.</p></dd>


<dt>n_predict</dt>
<dd><p>The number of time points (as identified by <code>id_time</code>) to have predictions
generated for.</p></dd>


<dt>step</dt>
<dd><p>How often should a window be generated? Default is 1, so a window is generated at
every value of <code>id_time</code>.</p></dd>


<dt>split_spatial_locations</dt>
<dd><p>Whether each spatial area (as identified by <code>id_space</code>) should be
located in its own data window (if <code>split_spatial_locations = TRUE</code>) or if they should all be
included in one window (if <code>split_spatial_locations = "FALSE"</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tibble with one row per data window, containing the columns <code>id_time</code>, <code>id_space</code>,
<code>split_id</code>, and <code>curr_data</code>. <code>id_time</code> and <code>id_space</code> identify the time point defining the end
of the time point and the spatial area or areas associated with the data window.  <code>split_id</code> is
the first time point in the data window in the prediction set. The data for each window is
stored in the <code>curr_data</code> column. There is no difference in the windowed data between data in
the training set and the prediction set, but that information is used by other <code>statsurv</code></p>


<p>functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">spacetime_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id_space <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             id_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             x <span class="op">=</span> <span class="va">x</span>,</span></span>
<span class="r-in"><span>                             y <span class="op">=</span> <span class="fl">2.04</span> <span class="op">*</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1.23</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create overlapping groups of data with at least 4 time points</span></span></span>
<span class="r-in"><span><span class="co"># and up to 8 time points in the</span></span></span>
<span class="r-in"><span><span class="co"># training set, and 2 time points in the prediction set.</span></span></span>
<span class="r-in"><span><span class="fu">window_idtime</span><span class="op">(</span><span class="va">spacetime_data</span>, min_train <span class="op">=</span> <span class="fl">4</span>, max_train <span class="op">=</span> <span class="fl">8</span>,</span></span>
<span class="r-in"><span>              n_predict <span class="op">=</span> <span class="fl">2</span>, split_spatial_locations <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 50 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    window_time_id window_space_id split_id curr_data       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>              6               1        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>              6               2        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>              6               3        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>              6               4        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>              6               5        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>              6               6        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>              6               7        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>              6               8        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>              6               9        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>              6              10        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ... with 40 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The same, but put each spatial area in its own window</span></span></span>
<span class="r-in"><span><span class="fu">window_idtime</span><span class="op">(</span><span class="va">spacetime_data</span>, min_train <span class="op">=</span> <span class="fl">4</span>, max_train <span class="op">=</span> <span class="fl">8</span>,</span></span>
<span class="r-in"><span>              n_predict <span class="op">=</span> <span class="fl">2</span>, split_spatial_locations <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 50 x 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    window_time_id window_space_id split_id curr_data       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>              6               1        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>              6               2        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>              6               3        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>              6               4        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>              6               5        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>              6               6        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>              6               7        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>              6               8        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>              6               9        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>              6              10        5 <span style="color: #949494;">&lt;tibble [6 x 4]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ... with 40 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Paul Romer Present.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

