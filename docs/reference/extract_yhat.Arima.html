<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Methods for extracting fitted values from ARIMA models, including those fit using
stats::arima, forecast::Arima, or
arima_tidy.
Compared to other types of models, extrating fitted values from Arima models is rather fiddly. In
particular, the order of rows in newdata and newxreg is crucially important. If the ARIMA
model was originally fit on n points, extract_yhat assumes that the first n rows of
newdata and newxreg correspond exactly to the data used to fit the model. The number of
additional rows in newdata is taken as the number of steps ahead that predictions should be
generated."><title>Extract fitted values from an ARIMA model — extract_yhat.Arima • statsurv</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract fitted values from an ARIMA model — extract_yhat.Arima"><meta property="og:description" content="Methods for extracting fitted values from ARIMA models, including those fit using
stats::arima, forecast::Arima, or
arima_tidy.
Compared to other types of models, extrating fitted values from Arima models is rather fiddly. In
particular, the order of rows in newdata and newxreg is crucially important. If the ARIMA
model was originally fit on n points, extract_yhat assumes that the first n rows of
newdata and newxreg correspond exactly to the data used to fit the model. The number of
additional rows in newdata is taken as the number of steps ahead that predictions should be
generated."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">statsurv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/spacetime_data.html">Spacetime Data in statsurv</a>
    <a class="dropdown-item" href="../articles/statsurv_overview.html">An introduction to `statsurv`</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CO-TEEO/statsurv/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Extract fitted values from an ARIMA model</h1>
      <small class="dont-index">Source: <a href="https://github.com/CO-TEEO/statsurv/blob/HEAD/R/extract_yhat-arima.R" class="external-link"><code>R/extract_yhat-arima.R</code></a>, <a href="https://github.com/CO-TEEO/statsurv/blob/HEAD/R/extract_yhat.R" class="external-link"><code>R/extract_yhat.R</code></a></small>
      <div class="d-none name"><code>extract_yhat.Arima.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Methods for extracting fitted values from ARIMA models, including those fit using
<code><a href="https://rdrr.io/r/stats/arima.html" class="external-link">stats::arima</a></code>, <code><a href="https://pkg.robjhyndman.com/forecast/reference/Arima.html" class="external-link">forecast::Arima</a></code>, or
<code><a href="arima_tidy.html">arima_tidy</a></code>.</p>
<p>Compared to other types of models, extrating fitted values from Arima models is rather fiddly. In
particular, the <em>order</em> of rows in <code>newdata</code> and <code>newxreg</code> is crucially important. If the ARIMA
model was originally fit on <code>n</code> points, <code>extract_yhat</code> assumes that the first <code>n</code> rows of
<code>newdata</code> and <code>newxreg</code> correspond exactly to the data used to fit the model. The number of
additional rows in <code>newdata</code> is taken as the number of steps ahead that predictions should be
generated.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for Arima</span></span>
<span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span>, <span class="va">resp_var</span>, newxreg <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for forecast_ARIMA</span></span>
<span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span>, newxreg <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for arima_tidy</span></span>
<span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fit</dt>
<dd><p>An ARIMA model fit object.</p></dd>


<dt>newdata</dt>
<dd><p>A data frame containing the data that should be used to predict the fitted values.
Must have all of the covariates used by the model fit object to calculate fitted values. The
first <code>n</code> rows should be exactly the data used to fit the model, and any additional rows should
correspond to the number of steps ahead that predictions should be generated.</p></dd>


<dt>resp_var</dt>
<dd><p>The column in <code>newdata</code> containing the time series data the model was fitted on.
Only used for <code><a href="https://rdrr.io/r/stats/arima.html" class="external-link">stats::arima</a></code> models. The column should be specified as bare text (no quotes).</p></dd>


<dt>newxreg</dt>
<dd><p>A matrix of covariate information containing both the values of <code>xreg</code> used to
originally fit the model, and any new values of xreg to be used for prediction. IMPORTANT:
Unlike <code><a href="https://rdrr.io/r/stats/predict.arima.html" class="external-link">predict.Arima</a></code>, <code>newxreg</code> must contain both the old and new values
of xreg.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed into other methods</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The input data frame <code>newdata</code> with the added column <code>.fitted</code> containing the predicted
values. Some models may also return additional columns, such as <code>.resid</code>. All columns added by
<code>extract_yhat</code> or <code>augment</code> start with a dot.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Behind the scenes, <code>extract_yhat</code> is performing two different tasks: extracting already
fitted values from the ARIMA model, and forecasting future values of the response variable. For
most other models, these two tasks are the same, since once the model is fit, the output of one
data point is not dependent on any other data points. The fact that the predictions of an ARIMA
model depend on the order of the data points drives a lot of the oddities of <code>extract_yhat</code> for
ARIMA models.</p>
<p>Extracting already fitted values is simple for models fit with the <code><a href="https://pkg.robjhyndman.com/forecast/reference/Arima.html" class="external-link">forecast::Arima</a></code> or
<code>arima_tidy</code> functions, because the fitted values are stored in the model fit object. Models
fit with <code><a href="https://rdrr.io/r/stats/arima.html" class="external-link">stats::arima</a></code> do <em>not</em> store this information, and so this information must be
supplied to <code>extract_yhat</code> by through the parameters <code>newdata</code> and <code>resp_var</code>.</p>
<p><code>extract_yhat</code> can only be used to predict fitted values conditional on the data used to fit
the model. For <code><a href="https://pkg.robjhyndman.com/forecast/reference/Arima.html" class="external-link">forecast::Arima</a></code> and <code><a href="https://rdrr.io/r/stats/arima.html" class="external-link">stats::arima</a></code>, any covariates necessary to generate these
forecasts must be provided as the last rows in <code>newxreg</code>. For <code>arima_tidy</code>, the covariates must
be provided as the last rows in <code>newdata</code>. Although <code>newdata</code> is note used for generating
predictions for <code>forecast::Ariam</code> or <code><a href="https://rdrr.io/r/stats/arima.html" class="external-link">stats::arima</a></code>, it is still a required parameter to the
functions, so that it can be used to report the final result. This is done so that the output
from <code>extract_yhat</code> is consistent with the output from <code>augment</code> and the broader Tidyverse,
which uses data frames as the key interface for passing data between functions.</p>
<p>For a version of arima that is based entirely on data frames, see <code><a href="arima_tidy.html">arima_tidy</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="extract_yhat.html">extract_yhat</a></code>  <code><a href="https://pkg.robjhyndman.com/forecast/reference/simulate.ets.html" class="external-link">simulate.Arima</a></code>
<code><a href="arima_tidy.html">arima_tidy</a></code> <code><a href="augment.arima_tidy.html">augment.arima_tidy</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"presidents_df"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit_stats_arima</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/arima.html" class="external-link">arima</a></span><span class="op">(</span><span class="va">presidents_df</span><span class="op">$</span><span class="va">approval_rating</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit_stats_arima</span>, <span class="va">presidents_df</span>, resp_var <span class="op">=</span> <span class="va">approval_rating</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     approval_rating    date election_year  .fitted      .resid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                NA 1945.25             0       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                87 1945.50             0 69.88907  17.1109291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                82 1945.75             0 81.73735   0.2626502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                75 1946.00             0 78.84617  -3.8461656</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                63 1946.25             0 73.14549 -10.1454892</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                50 1946.50             0 63.58330 -13.5832995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                43 1946.75             0 52.63291  -9.6329134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                32 1947.00             0 45.86112 -13.8611174</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                35 1947.25             0 37.01767  -2.0176744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10               60 1947.50             0 37.70113  22.2988750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11               54 1947.75             0 56.07146  -2.0714616</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12               55 1948.00             1 55.10623  -0.1062303</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               36 1948.25             1 55.02164 -19.0216372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14               39 1948.50             1 41.49934  -2.4993405</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15               NA 1948.75             1       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16               NA 1949.00             0       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17               69 1949.25             0 51.54767  17.4523293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               57 1949.50             0 65.54538  -8.5453846</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19               57 1949.75             0 58.46748  -1.4674798</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20               51 1950.00             0 56.86080  -5.8608004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21               45 1950.25             0 52.54832  -7.5483204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22               37 1950.50             0 47.43250 -10.4325007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23               46 1950.75             0 40.87919   5.1208123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24               39 1951.00             0 46.27679  -7.2767881</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25               36 1951.25             0 42.45057  -6.4505710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26               24 1951.50             0 39.35710 -15.3571013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27               32 1951.75             0 30.33047   1.6695286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28               23 1952.00             1 34.47377 -11.4737654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29               25 1952.25             1 29.07616  -4.0761650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30               32 1952.50             1 29.30865   2.6913512</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31               NA 1952.75             1       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32               32 1953.00             0 36.40042  -4.4004227</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33               59 1953.25             0 35.68754  23.3124628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34               74 1953.50             0 54.95105  19.0489549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35               75 1953.75             0 69.34727   5.6527263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36               60 1954.00             0 72.07437 -12.0743696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37               71 1954.25             0 61.42706   9.5729405</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38               61 1954.50             0 67.32492  -6.3249236</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39               71 1954.75             0 61.61025   9.3897536</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40               57 1955.00             0 67.45881 -10.4588136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41               71 1955.25             0 58.73526  12.2647403</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42               68 1955.50             0 66.92325   1.0767462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43               79 1955.75             0 66.64147  12.3585269</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44               73 1956.00             1 74.14602  -1.1460166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45               76 1956.25             1 71.30633   4.6936740</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46               71 1956.50             1 72.65923  -1.6592263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47               67 1956.75             1 69.46716  -2.4671628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48               75 1957.00             0 65.92273   9.0772736</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49               79 1957.25             0 71.13714   7.8628601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50               62 1957.50             0 75.08325 -13.0832462</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51               63 1957.75             0 63.40011  -0.4001126</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52               57 1958.00             0 61.84273  -4.8427302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53               60 1958.25             0 57.66414   2.3358599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54               49 1958.50             0 59.01704 -10.0170404</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55               48 1958.75             0 51.51250  -3.5124969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56               52 1959.00             0 49.32096   2.6790392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57               57 1959.25             0 52.06206   4.9379425</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58               62 1959.50             0 56.19135   5.8086493</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59               61 1959.75             0 60.45453   0.5454662</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60               66 1960.00             1 60.40524   5.5947632</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61               71 1960.25             1 63.86508   7.1349198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62               62 1960.50             1 68.12826  -6.1282633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 63               61 1960.75             1 62.32899  -1.3289930</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 64               57 1961.00             0 60.40524  -3.4052368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65               72 1961.25             0 57.39636  14.6036398</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66               83 1961.50             0 67.64200  15.3579995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67               71 1961.75             0 77.55656  -6.5565630</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68               78 1962.00             0 70.40439   7.5956076</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69               79 1962.25             0 73.82894   5.1710603</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70               71 1962.50             0 75.48492  -4.4849160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71               62 1962.75             0 69.86883  -7.8688326</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72               74 1963.00             0 62.32899  11.6710070</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73               76 1963.25             0 69.74894   6.2510565</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 74               64 1963.50             0 72.79312  -8.7931163</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75               62 1963.75             0 64.43594  -2.4359361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76               57 1964.00             1 61.39176  -4.3917634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 77               80 1964.25             1 57.53025  22.4697498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 78               73 1964.50             1 73.39197  -0.3919738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 79               69 1964.75             1 71.44022  -2.4402159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80               69 1965.00             0 67.62800   1.3720004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81               71 1965.25             0 67.09244   3.9075602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82               64 1965.50             0 68.52993  -4.5299332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83               69 1965.75             0 63.76649   5.2335136</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 84               62 1966.00             0 66.42299  -4.4229901</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85               63 1966.25             0 62.06121   0.9387869</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 86               46 1966.50             0 61.84273 -15.8427302</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 87               56 1966.75             0 49.75793   6.2420732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88               44 1967.00             0 54.66926 -10.6692643</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 89               44 1967.25             0 47.38320  -3.3832038</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90               52 1967.50             0 45.77652   6.2234756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 91               38 1967.75             0 51.52650 -13.5264978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 92               46 1968.00             1 42.53516   3.4648360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 93               36 1968.25             1 46.41068 -10.4106781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 94               49 1968.50             1 40.29433   8.7056690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95               35 1968.75             1 48.29914 -13.2991382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96               44 1969.00             0 39.97725   4.0227459</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97               59 1969.25             0 44.57151  14.4284851</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98               65 1969.50             0 56.55772   8.4422756</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99               65 1969.75             0 62.87855   2.1214463</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100              56 1970.00             0 63.68189  -7.6818934</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101              66 1970.25             0 57.21317   8.7868267</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102              53 1970.50             0 63.19563 -10.1956305</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 103              61 1970.75             0 55.19082   5.8091767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 104              52 1971.00             0 59.20023  -7.2002273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 105              51 1971.25             0 53.80263  -2.8026269</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 106              48 1971.50             0 51.87887  -3.8788707</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107              54 1971.75             0 49.58874   4.4112593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108              49 1972.00             1 53.49955  -4.4995509</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109              49 1972.25             1 50.70916  -1.7091572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 110              61 1972.50             1 50.03971  10.9602925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 111              NA 1972.75             1       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 112              NA 1973.00             0       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 113              68 1973.25             0 60.98400   7.0159974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 114              44 1973.50             0 65.62758 -21.6275794</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 115              40 1973.75             0 48.98988  -8.9898832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116              27 1974.00             0 42.90154 -15.9015377</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 117              28 1974.25             0 33.02227  -5.0222712</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 118              25 1974.50             0 32.00045  -7.0004486</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 119              24 1974.75             0 29.97810  -5.9780985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120              24 1975.00             0 28.85768  -4.8576820</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_forecast</span>  <span class="op">&lt;-</span> <span class="fu">forecast</span><span class="fu">::</span><span class="fu"><a href="https://pkg.robjhyndman.com/forecast/reference/Arima.html" class="external-link">Arima</a></span><span class="op">(</span><span class="va">presidents_df</span><span class="op">$</span><span class="va">approval_rating</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit_forecast</span>, <span class="va">presidents_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     approval_rating    date election_year  .fitted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                NA 1945.25             0       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                87 1945.50             0 69.88907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                82 1945.75             0 81.73735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                75 1946.00             0 78.84617</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                63 1946.25             0 73.14549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                50 1946.50             0 63.58330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                43 1946.75             0 52.63291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                32 1947.00             0 45.86112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                35 1947.25             0 37.01767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10               60 1947.50             0 37.70113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11               54 1947.75             0 56.07146</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12               55 1948.00             1 55.10623</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               36 1948.25             1 55.02164</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14               39 1948.50             1 41.49934</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15               NA 1948.75             1       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16               NA 1949.00             0       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17               69 1949.25             0 51.54767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               57 1949.50             0 65.54538</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19               57 1949.75             0 58.46748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20               51 1950.00             0 56.86080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21               45 1950.25             0 52.54832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22               37 1950.50             0 47.43250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23               46 1950.75             0 40.87919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24               39 1951.00             0 46.27679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25               36 1951.25             0 42.45057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26               24 1951.50             0 39.35710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27               32 1951.75             0 30.33047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28               23 1952.00             1 34.47377</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29               25 1952.25             1 29.07616</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30               32 1952.50             1 29.30865</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31               NA 1952.75             1       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32               32 1953.00             0 36.40042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33               59 1953.25             0 35.68754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34               74 1953.50             0 54.95105</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35               75 1953.75             0 69.34727</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36               60 1954.00             0 72.07437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37               71 1954.25             0 61.42706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38               61 1954.50             0 67.32492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39               71 1954.75             0 61.61025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40               57 1955.00             0 67.45881</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41               71 1955.25             0 58.73526</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42               68 1955.50             0 66.92325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43               79 1955.75             0 66.64147</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44               73 1956.00             1 74.14602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45               76 1956.25             1 71.30633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46               71 1956.50             1 72.65923</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47               67 1956.75             1 69.46716</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48               75 1957.00             0 65.92273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49               79 1957.25             0 71.13714</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50               62 1957.50             0 75.08325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51               63 1957.75             0 63.40011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52               57 1958.00             0 61.84273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53               60 1958.25             0 57.66414</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54               49 1958.50             0 59.01704</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55               48 1958.75             0 51.51250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56               52 1959.00             0 49.32096</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57               57 1959.25             0 52.06206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58               62 1959.50             0 56.19135</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59               61 1959.75             0 60.45453</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60               66 1960.00             1 60.40524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61               71 1960.25             1 63.86508</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62               62 1960.50             1 68.12826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 63               61 1960.75             1 62.32899</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 64               57 1961.00             0 60.40524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65               72 1961.25             0 57.39636</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66               83 1961.50             0 67.64200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67               71 1961.75             0 77.55656</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68               78 1962.00             0 70.40439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69               79 1962.25             0 73.82894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70               71 1962.50             0 75.48492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71               62 1962.75             0 69.86883</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72               74 1963.00             0 62.32899</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73               76 1963.25             0 69.74894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 74               64 1963.50             0 72.79312</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75               62 1963.75             0 64.43594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76               57 1964.00             1 61.39176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 77               80 1964.25             1 57.53025</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 78               73 1964.50             1 73.39197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 79               69 1964.75             1 71.44022</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80               69 1965.00             0 67.62800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81               71 1965.25             0 67.09244</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82               64 1965.50             0 68.52993</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83               69 1965.75             0 63.76649</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 84               62 1966.00             0 66.42299</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85               63 1966.25             0 62.06121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 86               46 1966.50             0 61.84273</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 87               56 1966.75             0 49.75793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88               44 1967.00             0 54.66926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 89               44 1967.25             0 47.38320</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90               52 1967.50             0 45.77652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 91               38 1967.75             0 51.52650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 92               46 1968.00             1 42.53516</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 93               36 1968.25             1 46.41068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 94               49 1968.50             1 40.29433</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95               35 1968.75             1 48.29914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96               44 1969.00             0 39.97725</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97               59 1969.25             0 44.57151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98               65 1969.50             0 56.55772</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99               65 1969.75             0 62.87855</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100              56 1970.00             0 63.68189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101              66 1970.25             0 57.21317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102              53 1970.50             0 63.19563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 103              61 1970.75             0 55.19082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 104              52 1971.00             0 59.20023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 105              51 1971.25             0 53.80263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 106              48 1971.50             0 51.87887</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107              54 1971.75             0 49.58874</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108              49 1972.00             1 53.49955</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109              49 1972.25             1 50.70916</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 110              61 1972.50             1 50.03971</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 111              NA 1972.75             1       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 112              NA 1973.00             0       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 113              68 1973.25             0 60.98400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 114              44 1973.50             0 65.62758</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 115              40 1973.75             0 48.98988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116              27 1974.00             0 42.90154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 117              28 1974.25             0 33.02227</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 118              25 1974.50             0 32.00045</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 119              24 1974.75             0 29.97810</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120              24 1975.00             0 28.85768</span>
<span class="r-in"><span><span class="co"># We can extract fitted values and make predictions at the same time</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/arima.html" class="external-link">arima</a></span><span class="op">(</span><span class="va">presidents_df</span><span class="op">$</span><span class="va">approval_rating</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">110</span><span class="op">]</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">presidents_df</span>, resp_var <span class="op">=</span> <span class="va">approval_rating</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     approval_rating    date election_year  .fitted       .resid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                NA 1945.25             0       NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                87 1945.50             0 69.89757  17.10242948</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                82 1945.75             0 81.05837   0.94162800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                75 1946.00             0 78.51376  -3.51376042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                63 1946.25             0 73.07179 -10.07178667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                50 1946.50             0 63.96582 -13.96581983</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                43 1946.75             0 53.47389 -10.47388902</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                32 1947.00             0 46.89598 -14.89597549</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                35 1947.25             0 38.46601  -3.46601029</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10               60 1947.50             0 38.93210  21.06790201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11               54 1947.75             0 56.25812  -2.25811610</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12               55 1948.00             1 55.75192  -0.75191811</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               36 1948.25             1 55.57596 -19.57596491</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14               39 1948.50             1 42.87393  -3.87392646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15               NA 1948.75             1       NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16               NA 1949.00             0       NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17               69 1949.25             0 52.67573  16.32427049</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               57 1949.50             0 65.52282  -8.52282424</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19               57 1949.75             0 59.05786  -2.05785524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20               51 1950.00             0 57.35395  -6.35394558</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21               45 1950.25             0 53.29794  -8.29793582</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22               37 1950.50             0 48.38997 -11.38997122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23               46 1950.75             0 42.13000   3.86999663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24               39 1951.00             0 47.07808  -8.07807825</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25               36 1951.25             0 43.62400  -7.62399910</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26               24 1951.50             0 40.60205 -16.60204691</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27               32 1951.75             0 32.06405  -0.06404997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28               23 1952.00             1 35.76815 -12.76815333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29               25 1952.25             1 30.82008  -5.82007845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30               32 1952.50             1 30.89415   1.10585053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31               NA 1952.75             1       NA           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32               32 1953.00             0 38.25271  -6.25271200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33               59 1953.25             0 37.11299  21.88700556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34               74 1953.50             0 55.15614  18.84386295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35               75 1953.75             0 69.12996   5.87004180</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36               60 1954.00             0 71.93585 -11.93584690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37               71 1954.25             0 61.93781   9.06218505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38               61 1954.50             0 67.24395  -6.24394579</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39               71 1954.75             0 62.04585   8.95415331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40               57 1955.00             0 67.38594 -10.38593826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41               71 1955.25             0 59.34184  11.65815982</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42               68 1955.50             0 66.81797   1.18203163</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43               79 1955.75             0 66.77786  12.22214191</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44               73 1956.00             1 73.78790  -0.78789858</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45               76 1956.25             1 71.29381   4.70619400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46               71 1956.50             1 72.46986  -1.46985605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47               67 1956.75             1 69.51583  -2.51582533</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48               75 1957.00             0 66.10186   8.89814354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49               79 1957.25             0 70.94190   8.05810040</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50               62 1957.50             0 74.78185 -12.78184588</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51               63 1957.75             0 63.85779  -0.85778809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52               57 1958.00             0 62.11992  -5.11991771</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53               60 1958.25             0 58.20590   1.79409959</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54               49 1958.50             0 59.38195 -10.38195047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55               48 1958.75             0 52.37191  -4.37190997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56               52 1959.00             0 50.13399   1.86600884</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57               57 1959.25             0 52.69601   4.30399480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58               62 1959.50             0 56.64398   5.35601677</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59               61 1959.75             0 60.73395   0.26604628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60               66 1960.00             1 60.76791   5.23208555</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61               71 1960.25             1 64.00593   6.99406988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62               62 1960.50             1 68.09590  -6.09590061</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 63               61 1960.75             1 62.72185  -1.72184832</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 64               57 1961.00             0 60.76791  -3.76791445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65               72 1961.25             0 57.92192  14.07808453</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66               83 1961.50             0 67.49397  15.50603000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67               71 1961.75             0 77.05987  -6.05987498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68               78 1962.00             0 70.50977   7.49022737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69               79 1962.25             0 73.53787   5.46212563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70               71 1962.50             0 75.20782  -4.20782329</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71               62 1962.75             0 69.94180  -7.94180274</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72               74 1963.00             0 62.72185  11.27815168</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73               76 1963.25             0 69.55594   6.44406439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 74               64 1963.50             0 72.61185  -8.61184852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75               62 1963.75             0 64.78381  -2.78381393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76               57 1964.00             1 61.72790  -4.72790102</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 77               80 1964.25             1 58.06391  21.93609206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 78               73 1964.50             1 72.90198   0.09801698</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 79               69 1964.75             1 71.43580  -2.43579847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80               69 1965.00             0 67.73784   1.26215534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81               71 1965.25             0 67.16987   3.83012523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82               64 1965.50             0 68.52188  -4.52187803</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83               69 1965.75             0 64.07385   4.92614842</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 84               62 1966.00             0 66.45991  -4.45991242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85               63 1966.25             0 62.43786   0.56213662</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 86               46 1966.50             0 62.11992 -16.11991771</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 87               56 1966.75             0 50.76988   5.23011750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88               44 1967.00             0 55.11603 -11.11602677</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 89               44 1967.25             0 48.42393  -4.42393195</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90               52 1967.50             0 46.72002   5.27997771</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 91               38 1967.75             0 52.12804 -14.12803532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 92               46 1968.00             1 43.79995   2.20004770</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 93               36 1968.25             1 47.22007 -11.22007072</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 94               49 1968.50             1 41.59599   7.40400579</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95               35 1968.75             1 48.96409 -13.96409066</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96               44 1969.00             0 41.34597   2.65403000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97               59 1969.25             0 45.44209  13.55790995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98               65 1969.50             0 56.86005   8.13995329</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99               65 1969.75             0 63.04594   1.95405645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100              56 1970.00             0 63.89790  -7.89789838</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101              66 1970.25             0 57.81388   8.18611627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102              53 1970.50             0 63.29597 -10.29596776</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 103              61 1970.75             0 55.92787   5.07212869</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 104              52 1971.00             0 59.48998  -7.48998221</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 105              51 1971.25             0 54.54191  -3.54190733</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 106              48 1971.50             0 52.58797  -4.58797346</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107              54 1971.75             0 50.41798   3.58202390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108              49 1972.00             1 54.04801  -5.04800846</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109              49 1972.25             1 51.51996  -2.51995515</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 110              61 1972.50             1 50.80999  10.19000721</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 111              NA 1972.75             1 58.92201           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 112              NA 1973.00             0 59.22120           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 113              68 1973.25             0 59.12839   8.87160905</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 114              44 1973.50             0 59.10813 -15.10813486</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 115              40 1973.75             0 59.08126 -19.08126367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116              27 1974.00             0 59.06022 -32.06022249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 117              28 1974.25             0 59.04218 -31.04218311</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 118              25 1974.50             0 59.02700 -34.02700077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 119              24 1974.75             0 59.01418 -35.01417603</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120              24 1975.00             0 59.00335 -35.00335071</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can supply an external predictor as well</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/arima.html" class="external-link">arima</a></span><span class="op">(</span><span class="va">presidents_df</span><span class="op">$</span><span class="va">approval_rating</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">110</span><span class="op">]</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    xreg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">presidents_df</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">110</span>, <span class="st">"election_year"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">presidents_df</span>, resp_var <span class="op">=</span> <span class="va">approval_rating</span>,</span></span>
<span class="r-in"><span>             newxreg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">presidents_df</span><span class="op">[</span>, <span class="st">"election_year"</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     approval_rating    date election_year  .fitted      .resid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                NA 1945.25             0       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                87 1945.50             0 70.43649  16.5635128</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                82 1945.75             0 81.19555   0.8044465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                75 1946.00             0 78.79648  -3.7964778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                63 1946.25             0 73.37698 -10.3769849</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                50 1946.50             0 64.33458 -14.3345791</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                43 1946.75             0 53.84118 -10.8411782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                32 1947.00             0 47.15836 -15.1583593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                35 1947.25             0 38.77737  -3.7773698</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10               60 1947.50             0 39.02455  20.9754546</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11               54 1947.75             0 56.03370  -2.0337002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12               55 1948.00             1 52.51064   2.4893584</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               36 1948.25             1 54.54114 -18.5411439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14               39 1948.50             1 42.68524  -3.6852427</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15               NA 1948.75             1       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16               NA 1949.00             0       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17               69 1949.25             0 54.29341  14.7065935</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               57 1949.50             0 65.68901  -8.6890065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19               57 1949.75             0 59.41859  -2.4185868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20               51 1950.00             0 57.52360  -6.5235978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21               45 1950.25             0 53.55510  -8.5551000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22               37 1950.50             0 48.63911 -11.6391077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23               46 1950.75             0 42.40028   3.5997172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24               39 1951.00             0 47.08970  -8.0897035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25               36 1951.25             0 43.88103  -7.8810311</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26               24 1951.50             0 40.79137 -16.7913720</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27               32 1951.75             0 32.38063  -0.3806291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28               23 1952.00             1 32.27452  -9.2745160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29               25 1952.25             1 29.90168  -4.9016758</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30               32 1952.50             1 30.35636   1.6436406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31               NA 1952.75             1       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32               32 1953.00             0 40.41909  -8.4190913</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33               59 1953.25             0 37.56652  21.4334830</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34               74 1953.50             0 54.89854  19.1014634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35               75 1953.75             0 69.08351   5.9164936</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36               60 1954.00             0 72.11366 -12.1136589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37               71 1954.25             0 62.35033   8.6496698</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38               61 1954.50             0 67.25717  -6.2571732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39               71 1954.75             0 62.38008   8.6199165</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40               57 1955.00             0 67.41509 -10.4150890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41               71 1955.25             0 59.73442  11.2655817</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42               68 1955.50             0 66.78343   1.2165740</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43               79 1955.75             0 67.01000  11.9900024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44               73 1956.00             1 70.30938   2.6906249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45               76 1956.25             1 70.39453   5.6054690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46               71 1956.50             1 71.98438  -0.9843782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47               67 1956.75             1 69.15104  -2.1510439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48               75 1957.00             0 69.21825   5.7817455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49               79 1957.25             0 71.56134   7.4386586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50               62 1957.50             0 74.91724 -12.9172399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51               63 1957.75             0 64.30483  -1.3048258</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52               57 1958.00             0 62.28167  -5.2816743</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53               60 1958.25             0 58.47109   1.5289077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54               49 1958.50             0 59.50785 -10.5078467</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55               48 1958.75             0 52.70601  -4.7060146</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56               52 1959.00             0 50.30753   1.6924749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57               57 1959.25             0 52.79527   4.2047255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58               62 1959.50             0 56.73402   5.2659810</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59               61 1959.75             0 60.83068   0.1693207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60               66 1960.00             1 57.45639   8.5436128</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61               71 1960.25             1 62.92213   8.0778666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62               62 1960.50             1 67.57189  -5.5718864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 63               61 1960.75             1 62.40872  -1.4087185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 64               57 1961.00             0 63.82851  -6.8285150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65               72 1961.25             0 58.70835  13.2916465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66               83 1961.50             0 67.44484  15.5551577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67               71 1961.75             0 77.08916  -6.0891578</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68               78 1962.00             0 70.88924   7.1107645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69               79 1962.25             0 73.62416   5.3758394</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70               71 1962.50             0 75.39099  -4.3909871</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71               62 1962.75             0 70.25757  -8.2575725</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72               74 1963.00             0 63.04150  10.9585002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73               76 1963.25             0 69.55725   6.4427464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 74               64 1963.50             0 72.77508  -8.7750752</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75               62 1963.75             0 65.15391  -3.1539111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76               57 1964.00             1 58.43363  -1.4336350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 77               80 1964.25             1 57.12730  22.8726975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 78               73 1964.50             1 72.10339   0.8966086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 79               69 1964.75             1 71.10554  -2.1055395</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80               69 1965.00             0 70.85692  -1.8569186</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81               71 1965.25             0 67.90868   3.0913249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82               64 1965.50             0 68.67841  -4.6784150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83               69 1965.75             0 64.36433   4.6356676</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 84               62 1966.00             0 66.56600  -4.5660036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85               63 1966.25             0 62.72567   0.2743317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 86               46 1966.50             0 62.28167 -16.2816743</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 87               56 1966.75             0 51.19551   4.8044870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88               44 1967.00             0 55.12511 -11.1251082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 89               44 1967.25             0 48.76727  -4.7672701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90               52 1967.50             0 46.87228   5.1277189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 91               38 1967.75             0 52.16361 -14.1636115</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 92               46 1968.00             1 40.66465   5.3353452</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 93               36 1968.25             1 46.06175 -10.0617452</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 94               49 1968.50             1 41.26400   7.7359991</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95               35 1968.75             1 48.28326 -13.2832553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96               44 1969.00             0 44.57879  -0.5787864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97               59 1969.25             0 46.00413  12.9958679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98               65 1969.50             0 56.79353   8.2064744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99               65 1969.75             0 63.13076   1.8692403</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100              56 1970.00             0 64.07825  -8.0782542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101              66 1970.25             0 58.12551   7.8744925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102              53 1970.50             0 63.31843 -10.3184287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 103              61 1970.75             0 56.29917   4.7008257</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 104              52 1971.00             0 59.53760  -7.5376000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 105              51 1971.25             0 54.84818  -3.8481793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 106              48 1971.50             0 52.76552  -4.7655212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107              54 1971.75             0 50.62336   3.3766434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108              49 1972.00             1 50.61565  -1.6156526</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109              49 1972.25             1 50.57265  -1.5726461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 110              61 1972.50             1 50.33616  10.6638399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 111              NA 1972.75             1 58.27316          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 112              NA 1973.00             0 61.86702          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 113              68 1973.25             0 61.49687   6.5031319</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 114              44 1973.50             0 61.26648 -17.2664787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 115              40 1973.75             0 61.05564 -21.0556426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116              27 1974.00             0 60.87981 -33.8798101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 117              28 1974.25             0 60.73022 -32.7302173</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 118              25 1974.50             0 60.60351 -35.6035074</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 119              24 1974.75             0 60.49608 -36.4960763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120              24 1975.00             0 60.40501 -36.4050102</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We can use arima_tidy to not have to generate xreg manually</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="arima_tidy.html">arima_tidy</a></span><span class="op">(</span><span class="va">approval_rating</span> <span class="op">~</span> <span class="va">election_year</span>, order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="va">presidents_df</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">110</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract_yhat.html">extract_yhat</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">presidents_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     approval_rating    date election_year  .fitted      .resid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                NA 1945.25             0       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                87 1945.50             0 70.43649  16.5635128</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                82 1945.75             0 81.19555   0.8044465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                75 1946.00             0 78.79648  -3.7964778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                63 1946.25             0 73.37698 -10.3769849</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                50 1946.50             0 64.33458 -14.3345791</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                43 1946.75             0 53.84118 -10.8411782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                32 1947.00             0 47.15836 -15.1583593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                35 1947.25             0 38.77737  -3.7773698</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10               60 1947.50             0 39.02455  20.9754546</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11               54 1947.75             0 56.03370  -2.0337002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12               55 1948.00             1 52.51064   2.4893584</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               36 1948.25             1 54.54114 -18.5411439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14               39 1948.50             1 42.68524  -3.6852427</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15               NA 1948.75             1       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16               NA 1949.00             0       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17               69 1949.25             0 54.29341  14.7065935</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               57 1949.50             0 65.68901  -8.6890065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19               57 1949.75             0 59.41859  -2.4185868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20               51 1950.00             0 57.52360  -6.5235978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21               45 1950.25             0 53.55510  -8.5551000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22               37 1950.50             0 48.63911 -11.6391077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23               46 1950.75             0 42.40028   3.5997172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24               39 1951.00             0 47.08970  -8.0897035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25               36 1951.25             0 43.88103  -7.8810311</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26               24 1951.50             0 40.79137 -16.7913720</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27               32 1951.75             0 32.38063  -0.3806291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28               23 1952.00             1 32.27452  -9.2745160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29               25 1952.25             1 29.90168  -4.9016758</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30               32 1952.50             1 30.35636   1.6436406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31               NA 1952.75             1       NA          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32               32 1953.00             0 40.41909  -8.4190913</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33               59 1953.25             0 37.56652  21.4334830</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34               74 1953.50             0 54.89854  19.1014634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35               75 1953.75             0 69.08351   5.9164936</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36               60 1954.00             0 72.11366 -12.1136589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37               71 1954.25             0 62.35033   8.6496698</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38               61 1954.50             0 67.25717  -6.2571732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39               71 1954.75             0 62.38008   8.6199165</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40               57 1955.00             0 67.41509 -10.4150890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41               71 1955.25             0 59.73442  11.2655817</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42               68 1955.50             0 66.78343   1.2165740</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43               79 1955.75             0 67.01000  11.9900024</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44               73 1956.00             1 70.30938   2.6906249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45               76 1956.25             1 70.39453   5.6054690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46               71 1956.50             1 71.98438  -0.9843782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47               67 1956.75             1 69.15104  -2.1510439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48               75 1957.00             0 69.21825   5.7817455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49               79 1957.25             0 71.56134   7.4386586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50               62 1957.50             0 74.91724 -12.9172399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51               63 1957.75             0 64.30483  -1.3048258</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52               57 1958.00             0 62.28167  -5.2816743</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53               60 1958.25             0 58.47109   1.5289077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54               49 1958.50             0 59.50785 -10.5078467</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55               48 1958.75             0 52.70601  -4.7060146</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56               52 1959.00             0 50.30753   1.6924749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57               57 1959.25             0 52.79527   4.2047255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58               62 1959.50             0 56.73402   5.2659810</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59               61 1959.75             0 60.83068   0.1693207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60               66 1960.00             1 57.45639   8.5436128</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61               71 1960.25             1 62.92213   8.0778666</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62               62 1960.50             1 67.57189  -5.5718864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 63               61 1960.75             1 62.40872  -1.4087185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 64               57 1961.00             0 63.82851  -6.8285150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65               72 1961.25             0 58.70835  13.2916465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66               83 1961.50             0 67.44484  15.5551577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67               71 1961.75             0 77.08916  -6.0891578</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68               78 1962.00             0 70.88924   7.1107645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69               79 1962.25             0 73.62416   5.3758394</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70               71 1962.50             0 75.39099  -4.3909871</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 71               62 1962.75             0 70.25757  -8.2575725</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 72               74 1963.00             0 63.04150  10.9585002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73               76 1963.25             0 69.55725   6.4427464</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 74               64 1963.50             0 72.77508  -8.7750752</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75               62 1963.75             0 65.15391  -3.1539111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 76               57 1964.00             1 58.43363  -1.4336350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 77               80 1964.25             1 57.12730  22.8726975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 78               73 1964.50             1 72.10339   0.8966086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 79               69 1964.75             1 71.10554  -2.1055395</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 80               69 1965.00             0 70.85692  -1.8569186</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81               71 1965.25             0 67.90868   3.0913249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82               64 1965.50             0 68.67841  -4.6784150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83               69 1965.75             0 64.36433   4.6356676</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 84               62 1966.00             0 66.56600  -4.5660036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85               63 1966.25             0 62.72567   0.2743317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 86               46 1966.50             0 62.28167 -16.2816743</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 87               56 1966.75             0 51.19551   4.8044870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88               44 1967.00             0 55.12511 -11.1251082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 89               44 1967.25             0 48.76727  -4.7672701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 90               52 1967.50             0 46.87228   5.1277189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 91               38 1967.75             0 52.16361 -14.1636115</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 92               46 1968.00             1 40.66465   5.3353452</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 93               36 1968.25             1 46.06175 -10.0617452</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 94               49 1968.50             1 41.26400   7.7359991</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95               35 1968.75             1 48.28326 -13.2832553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96               44 1969.00             0 44.57879  -0.5787864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 97               59 1969.25             0 46.00413  12.9958679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 98               65 1969.50             0 56.79353   8.2064744</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 99               65 1969.75             0 63.13076   1.8692403</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 100              56 1970.00             0 64.07825  -8.0782542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101              66 1970.25             0 58.12551   7.8744925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102              53 1970.50             0 63.31843 -10.3184287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 103              61 1970.75             0 56.29917   4.7008257</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 104              52 1971.00             0 59.53760  -7.5376000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 105              51 1971.25             0 54.84818  -3.8481793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 106              48 1971.50             0 52.76552  -4.7655212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107              54 1971.75             0 50.62336   3.3766434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108              49 1972.00             1 50.61565  -1.6156526</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109              49 1972.25             1 50.57265  -1.5726461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 110              61 1972.50             1 50.33616  10.6638399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 111              NA 1972.75             1 58.27316          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 112              NA 1973.00             0 61.86702          NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 113              68 1973.25             0 61.49687   6.5031319</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 114              44 1973.50             0 61.26648 -17.2664787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 115              40 1973.75             0 61.05564 -21.0556426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116              27 1974.00             0 60.87981 -33.8798101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 117              28 1974.25             0 60.73022 -32.7302173</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 118              25 1974.50             0 60.60351 -35.6035074</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 119              24 1974.75             0 60.49608 -36.4960763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120              24 1975.00             0 60.40501 -36.4050102</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Paul Romer Present.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

